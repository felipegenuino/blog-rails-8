<%= form_with(model: post, class: "max-w-4xl mx-auto") do |form| %>
  <div class="bg-white shadow-sm border border-gray-100 rounded-3xl overflow-hidden">
    
    <%# Cabeçalho Interno do Card %>
    <div class="bg-gray-50/50 px-8 py-6 border-b border-gray-100">
      <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
        <i data-lucide="pencil" class="w-5 h-5 text-indigo-600"></i>
        Informações do Conteúdo
      </h3>
      <p class="text-sm text-gray-500 mt-1">Preencha os detalhes abaixo para publicar seu post.</p>
    </div>

    <div class="p-8 space-y-8">
      <%# Grid para Título e Tipo %>
      <div class="grid grid-cols-1 gap-8 sm:grid-cols-6">
        <div class="sm:col-span-4">
          <%= form.label :title, "Título do Post", class: "block text-sm font-bold text-gray-700 mb-2" %>
          <%= form.text_field :title, 
              placeholder: "Ex: Como configurar Rails 8 no WSL2",
              class: "block w-full rounded-2xl border-gray-200 py-3 px-4 text-gray-900 shadow-sm focus:ring-2 focus:ring-indigo-600 focus:border-transparent transition-all placeholder:text-gray-400" %>
        </div>

       <div class="sm:col-span-2">
          <%= form.label :content_type, "Categoria", class: "block text-sm font-bold text-gray-700 mb-2" %>
          <div class="relative">
            <%= form.select :content_type, Post.content_types.keys.map { |t| [t.titleize, t] }, {}, 
                class: "block w-full rounded-2xl border-gray-200 py-3 pl-4 pr-10 text-gray-900 shadow-sm focus:ring-2 focus:ring-indigo-600 focus:border-transparent transition-all cursor-pointer appearance-none bg-white" %>
            
            <%# Adicionamos um ícone customizado para garantir que ele nunca quebre %>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3">
              <i data-lucide="chevron-down" class="h-4 w-4 text-gray-400"></i>
            </div>
          </div>
        </div>
      </div>

      <%# Campo de Resumo (SEO) %>
      <div>
        <%= form.label :summary, "Resumo para SEO", class: "block text-sm font-bold text-gray-700 mb-2" %>
        <div class="relative group">
          <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
            <i data-lucide="search" class="h-4 w-4 text-gray-400 group-focus-within:text-indigo-600 transition-colors"></i>
          </div>
          <%= form.text_area :summary, rows: 2, 
              placeholder: "Uma breve descrição para aparecer no Google e redes sociais...",
              class: "block w-full rounded-2xl border-gray-200 py-3 pl-11 text-gray-900 shadow-sm focus:ring-2 focus:ring-indigo-600 focus:border-transparent transition-all placeholder:text-gray-400" %>
        </div>
      </div>

      <%# Campo de Conteúdo (Trix) %>
      <div>
        <%= form.label :content, "Conteúdo do Post", class: "block text-sm font-bold text-gray-700 mb-3" %>
        <div class="prose max-w-none">
          <%# O segredo aqui é o padding e o arredondamento no wrapper do Trix %>
          <div class="rounded-2xl border border-gray-200 shadow-sm overflow-hidden focus-within:ring-2 focus-within:ring-indigo-600 focus-within:border-transparent transition-all">
            <%= form.rich_textarea :content, class: "min-h-[300px] border-none focus:ring-0 p-4" %>
          </div>
        </div>
      </div>
    </div>

    <%# Rodapé com Ações %>
    <div class="bg-gray-50 px-8 py-6 flex items-center justify-end gap-4 border-t border-gray-100">
      <%= link_to posts_path, class: "inline-flex items-center gap-2 px-6 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all" do %>
        <i data-lucide="x" class="w-4 h-4"></i>
        Cancelar
      <% end %>

      <%= form.button class: "inline-flex items-center gap-2 px-8 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-500 hover:-translate-y-0.5 active:translate-y-0 transition-all cursor-pointer" do %>
        <i data-lucide="save" class="w-4 h-4"></i>
        <%= post.new_record? ? "Publicar Conteúdo" : "Salvar Alterações" %>
      <% end %>
    </div>
  </div>
<% end %>